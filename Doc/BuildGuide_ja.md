# NumAtreus_Plus8ビルドガイド


## 概要
NumAtreus_Plus8は、以下のいずれかの方法で組み立てます。
- NumAtreus基板を使用し、空中配線で基板左右にキースイッチを追加する、”NumAtreusを拡張する方法”
- ProMicro、キースイッチ、その他の部品全てを空中配線する、”手配線する方法”

このビルドガイドでは、NumAtreusを拡張する方法について説明します。

## 部品

ねじとスペーサーは、プレートとフレームをサインドイッチ構造で固定できれば良いので、代替サイズのものへ交換可能です。

〓図〓

### NumAtreusを拡張する方法
|部品名|個数|備考|
|:--|--:|:--|
|キープレート兼ベースプレート|2枚||
|ミドルフレーム|2個||
|ねじ M2 4mm|16個|代替サイズへ変更可能|
|スペーサー M2 8mm|16個|代替サイズへ変更可能|
|キースイッチ|50個||
|キーキャップ|50個||
|ProMicro|1個||
|NumAtreus基板|1枚||
|ダイオード 1N4148|50個||
|リセットスイッチ|1個||
|ポリウレタン銅線などの配線材|適当な長さ||
|低背ピンヘッダ 廣杉PSS-410153-12|2個||
|USBコネクタ変換基板 サンハヤトCK-37|1個|オプション。<br>ケースにUSBポートを設置する場合に使用。|
|マイクロUSBケーブル|1本|オプション。<br>ケースにUSBポートを設置する場合に使用。|


## 使用する道具類
半田付け作業に関連する道具、半田ごて、こて台、半田などが必要です。
基板を削る作業で、やすりを使用します。
他にはニッパーやドライバーなどの基本的な工具を使用します。

*オプションのUSBコネクタ変換基板をケースに設置する場合、ケーブルの接続確認のためにテスターを使用してください。*


## 作業手順

### （オプション）ProMicroのコネクタもげ防止処理を行う

### ProMicroにファームウェアを書き込む
ProMicro単体でPCやMacに接続し、[ファームウェア](〓)を書き込みます。
ProMicro自体が故障していないかの確認も兼ねています。

### ProMicro実装の準備

---
**基板を削るとNumAtreus基板のBluetoothやLEDといった機能が使用できなくなってしまいます。**
**それらの機能を使用する際は代替方法を検討してください。**
- 代替方法1
ProMicroのマイクロUSBコネクタを取り外して、USBコネクタ変換基板へ配線する方法。
NumAtreus基板はオリジナルのまま使用可能ですが、作業難易度が高く、ProMicroを破損する可能性があります。（ランド剥離で1個壊しました）

- 代替方法2
基板を削ってProMicroを設置した上で、元の配線を配線材などで復元させる方法。
復元方法を考える必要がありますが、作業難易度と破損する危険性は低くなります。
---

#### NumAtreus基板を削る
ProMicroの実装高さを低く抑えてケース全高を低くするため、ProMicroのUSBコネクタとNumAtreus基板が干渉する部分をやすりで削り落とします。
〓回路図〓
〓削る箇所写真〓

#### 干渉を確認する
ProMicroとピンヘッダ、NumAtreus基板を仮組みし、USBコネクタが干渉しないことを確認します。


### NumAtreus基板にダイオードを半田付けする
NumAtreus基板の42個を半田付けします。
基板の左右へ空中配線するキースイッチ分については、後の手順でおこないます。


### ピンヘッダの足を短くする
ProMicroとNumAtreus基板を接続するピンヘッダの足を、ProMicroの穴から飛び出さない程度の長さに切断します。
ビニール袋の中などで切断すると、切断した足が飛び散りません。
〓写真〓


### ProMicroをNumAtreus基板へ半田付けする
ProMicroと足を短くしたピンヘッダ、NumAtreus基板を仮組みし、マスキングテープなどでProMicroを固定します。
ピンヘッダが根元まできっちり刺さっていることを確認し、NumAtreus基板を裏返します。
まず4隅を半田付けして、ピンヘッダが基板から浮いていないか確認したら、残りを半田付けします。

NumAtreus基板を裏返して表面にし、同様にProMicro側を半田付けします。
ProMicroの穴から、半田がほんの少しはみ出るくらいにします。
〓写真〓

ProMicroの半田付けが終わったら、PCやMacに接続してキーボードとして認識されることを確認します。
また、キースイッチの穴をピンセットなどでショートさせ、キー入力されるかも確認しておきます。


### キープレートを介して、キースイッチを半田付けする

好みに応じて、イラスト面、または無地面をキープレート表面に選びます。

キープレートの中心部から左右1列目の、一番上と一番下の4箇所へ、キースイッチをはめ込みます。
〓図〓

キープレートをNumAtreus基板へ組み付け、キープレートとNumAtreus基板が平行になっていることを確認します。
少しの傾きなら、ぴったり平行になっていなくても問題ありません。
傾きが目立つようなら、キースイッチのおさまり具合や、ProMicroの半田はみ出し量が多すぎてキープレートを押し上げていないかを確認します。

平行になっていることが確認できたら、傾かないように注意しつつ、4個のキースイッチを半田付けします。

続いて、キープレートの中心から左右5列目の、一番上と一番下の4箇所へキースイッチをはめ込み、同様に平行を確認して半田付けします。
〓図〓

---

*初回生産分のキープレートに関しての追加作業*
中央部に飛び出した2個の穴が1mmほどずれているため、そのままではキースイッチの手前側が浮いてしまいます。
〓写真〓
これを回避するため、キースイッチ裏側のプラ足部分をニッパーなどで切断します。
また、ステムが切断した部分に引っかからないよう、穴をプラスドライバーなどで少し広げておきます。
〓写真〓

---

空中配線するキースイッチを除き、残りのキースイッチをすべて半田付けします。


### 追加キースイッチを空中配線する
キープレートに追加キースイッチをはめ込み、裏返します。

写真のように接続されるよう、半田付けしてください。
〓写真〓

PCやMacに接続して全てのキーが正常に動作することを確認します。


### （オプション）USBコネクタ変換基板にUSBケーブルを接続する

*この作業手順はオプションです*
*この作業手順を行わない場合、リセットスイッチはNumAtreus基板へ設置してください。*

---

*初回生産分のキープレートに関しての追加作業*
ケースとUSBコネクタ変換基板のねじ穴間隔が2mmほどずれているため、USBコネクタ変換基板の穴を外側へ拡大します。
丸やすりを穴に突っ込んでやするか、どちらか片方の穴をニッパーで切って広げてください。
〓図〓

---

USBケーブルを、コネクタから5cm程度の長さに切断します。

USBケーブルの被膜を少し剥がして内部の配線を取り出し、USBコネクタ変換基板のパッドへ半田付けします。
ProMicroへUSBケーブルを接続し、正しく接続できているかテスターで確認します。

USBコネクタ変換基板の空いているパターンへ、リセットスイッチを半田付けします。

NumAtreus基板のRESETと書かれた箇所から、USBコネクタ変換基板のリセットスイッチへ配線します。

PCやMacに接続して全てのキーが正常に動作することを確認します。


### （オプション）ミドルフレームのエッジ部分を塗る

*この作業手順はオプションです*

ミドルフレームを重ねた時にエッジ部分が白く見えてしまわないように、フレームの表面と裏面の外側エッジ部分を黒っぽい色で塗ります。

〓写真〓


### ケースを組み上げる

キープレートへスペーサーをねじ止めします。

USBコネクタ変換基板を使用する場合は、スペーサーに合わせてはめ込みます。

USBコネクタ変換基板を使用しない場合は、USBケーブルをProMicroへ接続しておきます。

ミドルフレームをスペーサーに合わせてはめ込みます。

ベースプレートをネジで仮止めし、フレームのズレを調整してからねじを締め込んで固定します。

### キーキャップを装着する

好みのキーキャップを装着して、完成です。

**キーキャップを取り外す際、一番外側のキースイッチがプレートから外れてしまうことがあるため、空中配線を切ってしまわないように気をつけてください。**
